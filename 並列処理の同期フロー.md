並列処理の同期
---

**問題文**

流れ図に示す処理の動作の記述として，適切なものはどれか。ここで，二重線は並列処理の同期を表す。





          ( 開始 )
              |
              V
          +-------+
          |   A   |  <-- (1) 逐次処理
          +-------+
              |
              V
        +-----+ <-----------------------------------+
        |                                           |
        V                                           |
  =================  <-- (2) フォーク (並列処理の開始)  |
   |             |                                  |
   |             |                                  |
   V             V                                  |
+-------+     +-------+                             |
|   B   |     |   C   |  <-- (3) BとCの並列処理       |
+-------+     +-------+                             |
   |             |                                  |
   |             |                                  |
   V             V                                  |
  =================  <-- (4) ジョイン (同期)          |
        |                                           |
        +-------------------------------------------+  <-- (5) ループ
**選択肢**
ア　ABC又はACBを実行してデッドロックになる。
イ　AB又はACを実行してデッドロックになる。
ウ　Aの後にBC又はCB，BC又はCB，…と繰り返して実行する。
エ　Aの後にBの無限ループ又はCの無限ループになる。



正解は **ウ** です。あなたの解答 **エ** がなぜ間違いで、ウが正しいのかを順を追って見ていきましょう。

### 流れ図（フローチャート）の読み解き
この問題の最大のポイントは、問題文にある「**二重線は並列処理の同期を表す**」という部分です。

1.  **開始 → A**
    *   処理は「開始」から始まり、最初にプロセス**A**が実行されます。
2.  **Aの後 → 上の二重線（フォーク）**
    *   Aの処理が終わると、最初の二重線に到達します。これは「**フォーク（Fork）**」と呼ばれ、ここから処理が2つに分岐し、並列で実行されます。
    *   つまり、プロセス**B**とプロセス**C**が同時に（またはほぼ同時に）開始されます。
3.  **BとCの並列処理**
    *   BとCは独立して並列に動きます。どちらが先に終わるかは決まっていません。
4.  **BとCの後 → 下の二重線（ジョイン／同期）**
    *   BとCの処理が終わると、下の二重線に到達します。これは「**ジョイン（Join）**」または「**同期**」と呼ばれます。
    *   この同期ポイントの意味は、「**分岐した全ての処理（この場合はBとCの両方）が終わるまで、次の処理に進まずに待つ**」ということです。
        *   もしBが先に終わっても、Cが終わるまでここで待機します。
        *   もしCが先に終わっても、Bが終わるまでここで待機します。
5.  **下の二重線から上への矢印（ループ）**
    *   BとCが**両方とも**完了し、同期が取れた後、矢印は上の二重線（フォーク）の直前に戻っています。
    *   これは、**BとCのペアの処理を繰り返す**ことを意味します。

### なぜ各選択肢が正しいか／間違っているか

この動作を元に、選択肢を一つずつ見ていきましょう。

*   **ア：ABC又はACBを実行してデッドロックになる。**
    *   **間違い**。デッドロックは、複数のプロセスがお互いの終了を待ち合ってしまい、誰も進めなくなる状態です。この図では、BとCが終わればループが継続するため、デッドロックは発生しません。

*   **イ：AB又はACを実行してデッドロックになる。**
    *   **間違い**。アと同じく、デッドロックは発生しません。また、BとCは両方実行される必要があるので、「AB又はAC」という片方だけ実行する記述も誤りです。

*   **ウ：Aの後にBC又はCB、BC又はCB、…と繰り返して実行する。**
    *   **正しい**。
        *   「Aの後に」→ 正しい。
        *   「BC又はCB」→ BとCは並列実行なので、完了する順番は「B→C」かもしれないし「C→B」かもしれない。この表現は正しいです。
        *   「...と繰り返して実行する」→ ループ構造になっているので、これも正しいです。
    *   この選択肢が、流れ図の動作を最も正確に説明しています。

*   **エ：Aの後にBの無限ループ又はCの無限ループになる。**
    *   **間違い**。これがあなたの選んだ選択肢です。なぜこれが間違いかを理解することが重要です。
    *   「Bの無限ループ」（B→B→B...）になるためには、Bが終わった後、Cを待たずにすぐに次のBが始まらなければなりません。
    *   しかし、図の下にある**同期の二重線**がそれを防ぎます。
     Bが終わっても、**Cが終わるまで待たなければならない**ため、`Bだけが連続で実行されることは絶対にありません`。Cの無限ループも同様の理由で不可能です。

### 結論
このフローチャートは、「**Aを1回実行した後、BとCのペアを並列で実行し、`両方の完了を待ってから`、またBとCのペアの実行を繰り返す**」という動作を表しています。
したがって、その動作を正しく記述している**ウ**が正解となります。