
---

# アドレス指定方式の体系的解説

## 1. はじめに：アドレス指定方式とは

### 1.1. コンピュータ命令の基本構成

コンピュータが実行する命令は、基本的に「**命令部**」と「**アドレス部（オペランド部）**」から構成されます。

*   **命令部（オペコード）**: どのような処理（加算、比較、ロードなど）を行うかを示す部分。
*   **アドレス部（オペランド部）**: 命令の処理対象となるデータの場所（メモリアドレスなど）を示す部分。

```
命令 = [ 命令部 | アドレス部 ]
```
※命令の種類によってはアドレス部がないものもあります。

### 1.2. アドレス指定方式の定義と目的

**アドレス指定方式**とは、命令のアドレス部に記述された値をどのように解釈して、実際に処理対象データが格納されている場所（**有効アドレス**）を特定するかを決定するための一連の方式です。

CPUが主記憶（メモリ）にアクセスする際、効率的かつ柔軟にデータを指定するために、複数の方式が考案されました。直接アドレスを指定するだけでは、配列処理、ポインタ、ループ処理、再配置可能なプログラムといった、より高度なプログラミングに対応することが難しくなります。そのため、基底レジスタやインデックスレジスタ、間接指定などを導入することで、プログラムの再利用性や効率性を向上させています。

## 2. アドレス指定方式の種類と詳細解説

アドレス指定方式には、主に以下の6つの種類があります。

### 2.1. 即値アドレス指定 (Immediate Addressing)

*   **定義**: アドレス部の値をメモリアドレスとして解釈するのではなく、**処理対象のデータそのもの**として扱います。
*   **解説**: アドレス部の値が直接、演算などに使用されます。
*   **具体例**: 「処理対象データ自体」を指定する方式。初期値の設定などで使用されます。

### 2.2. 直接アドレス指定 (Direct Addressing)

*   **定義**: アドレス部に記述された値を、**そのまま有効アドレス**とします。
*   **解説**: 最もシンプルで、「ここにデータがありますよ」と直接的にデータの場所を指定します。
*   **具体例**: 「処理対象データが格納されている記憶場所のアドレス」を直接指定します。

### 2.3. 間接アドレス指定 (Indirect Addressing)

*   **定義**: アドレス部の値で主記憶上のアドレスを指定し、**そのアドレスに格納されている値を有効アドレス**とします。
*   **解説**: ワンクッション置いて本当のアドレスを取り出す方式で、プログラミングにおける**ポインタ**の概念に相当します。
*   **具体例**: 「処理対象データが格納されている記憶場所のアドレスが格納されている記憶場所のアドレス」を指定します。「住所が書いてある場所」をまず参照し、そこに書かれている本当の住所（有効アドレス）を読み取ります。

### 2.4. 相対アドレス指定 (Relative Addressing)

*   **定義**: アドレス部の値に**プログラムカウンタ（PC）の値を加えたもの**を有効アドレスとします。
*   **解説**: アドレス部の値は、現在の実行位置からの「距離（差分）」として扱われます。主に分岐命令（ジャンプ、ループ）で用いられます。
*   **具体例**: 「いま実行中の位置（PC）から20先にジャンプせよ」といった命令で使用されます。

### 2.5. 指標（インデックス）アドレス指定 (Indexed Addressing)

*   **定義**: アドレス部の値に**インデックスレジスタの値を加えたもの**を有効アドレスとします。
*   **解説**: 配列の各要素に順番にアクセスする際に便利です。インデックスレジスタの値を変化させることで、基準となるアドレスから連続したメモリ領域を効率的に参照できます。
*   **具体例**: 配列処理において、添字（インデックス）をインデックスレジスタに格納して利用します。

### 2.6. 基底（ベース）アドレス指定 (Base Addressing)

*   **定義**: アドレス部の値に**ベースレジスタの値を加えたもの**を有効アドレスとします。
*   **解説**: プログラムをメモリ上のどこに配置しても正しく動作させる「再配置可能プログラム」を実現するために使われます。アドレス部の値は、基準点からの差分として扱われます。
*   **具体例**: 「処理対象データが格納されている記憶場所のアドレスとアドレス計算の基準点との差分」を用いてアドレスを計算します。

## 3. 全方式の比較一覧

各アドレス指定方式の特徴と典型的な用途を以下の表にまとめます。

| 指定方式 | アドレス部の意味 | 有効アドレスの計算方法 | 典型的な用途（試験で狙われる） |
| :--- | :--- | :--- | :--- |
| **即値** | データそのもの | アドレス計算なし（値として利用） | 定数の設定、初期値設定 |
| **直接** | データがある場所（有効アドレス） | アドレス部そのまま | 単純なデータ参照、固定アドレス参照 |
| **間接** | 「有効アドレス」が格納されている場所のアドレス | アドレス部が指すメモリの中身 | ポインタ参照、動的データ構造 |
| **相対** | PCからの差分（オフセット） | プログラムカウンタ ＋ アドレス部 | 分岐命令、ループ、再配置可能プログラム |
| **指標(インデックス)** | 配列の先頭などからの差分 | インデックスレジスタ ＋ アドレス部 | 配列処理 |
| **基底(ベース)** | プログラムの先頭からの差分 | ベースレジスタ ＋ アドレス部 | 再配置可能プログラム |

## 4. CPUアーキテクチャとの関連

アドレス指定方式は、CPUが命令を実行するサイクルの中で機能します。

### 4.1. 命令レジスタと命令サイクル

CPUが主記憶から読み出してきた「命令語」は、**命令レジスタ（IR: Instruction Register）**に一時的に保持されます。アドレス指定方式は、この命令レジスタに格納された命令語の**アドレス部をCPUがどう解釈するか**を定義するものです。

### 4.2. 命令のフェッチ・デコード・実行の流れ

1.  **フェッチ**: プログラムカウンタ(PC)が指す番地から「命令語」を主記憶から取り出し、命令レジスタ(IR)に格納します。
2.  **デコード**: 制御回路が命令レジスタの内容を解釈します。
    *   **命令部** → 何をするか（LOAD, ADDなど）を判断。
    *   **アドレス部** → どのデータを、どの**アドレス指定方式**で取得するかを判断。
3.  **実行**:
    *   アドレス指定方式に従って有効アドレスを算出します。
    *   主記憶からデータを汎用レジスタなどにロードし、演算器(ALU)で処理を実行します。

**ポイント**: 命令レジスタに入るのは「命令語」だけであり、処理対象の**データそのもの**は（即値指定を除き）入りません。データは、命令実行の段階で、算出された有効アドレスを元にメモリから読み出されます。

## 5. 【深掘り解説】特に重要なアドレス指定方式

試験では特に「直接」「間接」「相対」の3つの方式が頻出であり、混同しやすいため詳しく解説します。

### 5.1. 「直接」「間接」「相対」指定方式の比較

| 項目 | 直接アドレス指定 | 間接アドレス指定 | 相対アドレス指定 |
| :--- | :--- | :--- | :--- |
| **概念** | アドレス部 = **データの住所** | アドレス部 = **住所が書かれた場所** | アドレス部 = **PCからの距離** |
| **プロセス** | `命令のアドレス部` → (そのまま) → `有効アドレス` | `命令のアドレス部` → (参照) → `中身の値` → (それが) → `有効アドレス` | `命令のアドレス部` + `PCの値` → `有効アドレス` |
| **イメージ** | 「1000番地のデータを取れ」と直接指示 | 「1000番地に行け。そこに本当の住所が書いてある」と間接的に指示 | 「今いる場所から20進んだ場所へジャンプせよ」と相対的に指示 |

### 5.2. 各方式の実用性とメリット・オーバーヘッド

#### 間接アドレス指定のメリットとオーバーヘッド

*   **オーバーヘッド**: メモリアクセスが1回増えます（アドレスが書かれた場所を読む→そのアドレスのデータを読む）。そのため、直接指定より処理は少し重くなります。
*   **メリット**:
    *   **動的なデータ構造**: データの場所が実行中に変わるポインタ、リンクリスト、ツリー構造などを柔軟に扱うことができます。
    *   **仮想記憶**: OSがページテーブルを辿る動作は、まさに間接参照であり、仮想記憶管理に必須の技術です。

#### 相対アドレス指定のメリットとオーバーヘッド

*   **オーバーヘッド**: PCの値との加算処理のみであり、CPU内部で高速に完結するため、コストはほとんどかかりません。
*   **メリット**:
    *   **再配置可能性**: プログラムをメモリ上のどこに配置しても、実行位置からの相対的な位置関係は変わらないため、正しく動作します。
    *   **分岐命令**: 現代のCPUのif文、for文、while文といった分岐命令は、ほぼすべて相対アドレス指定を利用しています。

## 6. 試験対策のポイント

### 6.1. 平成28年秋期 問9 の分析

この問題は、間接アドレス指定方式の定義を正しく理解しているかを問うものです。

*   **問題**: 間接アドレス指定方式のアドレス部で指定するものはどれか。
*   **正解（イ）**: 処理対象データが格納されている記憶場所のアドレスが格納されている記憶場所のアドレス
    *   まさに「住所が書いてある場所のアドレス」という間接指定の定義そのものです。
*   **誤答例（エ）**: 処理対象データ自体
    *   これは**即値アドレス指定**の説明です。ユーザーが選択したこの誤答は、間接指定と即値指定の混同を狙った典型的な引っかけ問題です。

### 6.2. 試験の着眼点と頻出領域

*   各方式の**「アドレス部が何を意味するか」**を正確に覚えることが最も重要です。
*   **間接アドレス指定**は「ワンクッション置く」「ポインタ」というキーワードと結びつける。
*   **即値アドレス指定**は「データそのもの」と覚える。
*   **基底アドレス指定**と**相対アドレス指定**は、どちらも「基準値＋差分」という形式ですが、基準が「ベースレジスタ」か「プログラムカウンタ」かで区別する。

### 6.3. よくある誤解と正しい知識

*   **誤解**: 「アドレス部にデータが入っている」というだけで、すべて即値指定だと考えてしまう。
*   **正しい知識**:
    *   **即値指定**: アドレス部が「データそのもの」。
    *   **間接指定**: アドレス部が「データの場所（アドレス）が書かれている場所（アドレス）」を指す。
    *   その他: アドレス部は、有効アドレスを計算するための情報（直接アドレス、差分など）である。

### 6.4. 知識確認のための一問一答

**Q1. アドレス部の値をそのまま有効アドレスとする方式は？**
> **A1. 直接アドレス指定**
>
> **解説**: 単純に「ここにデータがありますよ」と指定する方式です。

**Q2. アドレス部の値を使って、主記憶上のある場所を参照し、その中の値を有効アドレスとする方式は？**
> **A2. 間接アドレス指定**
>
> **解説**: ポインタのように「データの場所を格納している場所」を参照する方式です。

**Q3. プログラムカウンタの値を基準にする方式は？**
> **A3. 相対アドレス指定**
>
> **解説**: 分岐命令などで使われ、現在の実行位置からの相対的な移動先を指定します。

**Q4. 配列処理に使うアドレス指定方式は？**
> **A4. 指標（インデックス）アドレス指定**
>
> **解説**: 添字（インデックスレジスタの値）を基準アドレスに足すことで、配列の要素を順に参照できます。

**Q5. アドレス部の値そのものをデータとして使う方式は？**
> **A5. 即値アドレス指定**
>
> **解説**: アドレス解釈をせず、値を直接利用する方式です。

## 7. まとめ

*   **アドレス指定方式**は、命令のアドレス部を解釈して有効アドレスを求めるためのルールです。
*   **間接アドレス指定**は「データのアドレスが格納されている場所のアドレス」を指定する方式で、ワンクッション置くポインタ的な動作が特徴です。
*   **即値アドレス指定**（データそのもの）や**直接アドレス指定**（データのアドレス）との違いを明確に区別することが、試験対策上非常に重要です。