## ロールバック、バックアウト、切り戻し及び関連用語の体系的解説

## 1. 概要
システム開発や運用の現場では、障害発生時や計画変更時にシステムを以前の状態に戻す操作が不可欠です。その際に使われる「`ロールバック`」「`バックアウト`」「`切り戻し`」といった用語は、似ているようで対象範囲や実行タイミングが明確に異なります。

本ドキュメントでは、これらの用語と、システム移行・リリース管理で登場する関連用語（`移行計画`、`移行リハーサル`、`バックアウト計画`など）について、応用情報技術者試験（AP）の出題傾向やIPA・ITILの定義に基づき、体系的に解説します。

### 1-1. 全体像
これらの用語は、発生した問題の性質に応じて以下のように使い分けられます。

**データ処理の復旧（データベース操作）**
- `トランザクション`処理中に障害が発生した場合 → `ロールバック`

**ソフトウェア変更の撤回（リリース・移行管理）**
- システム更新・移行後に問題が発生した場合 → `バックアウト`（`切り戻し`）

---

## 2. 基本用語の定義と違い
まず、最も基本的な3つの用語「`ロールバック`」「`バックアウト`」「`切り戻し`」について定義と違いを明確にします。

### 2-1. ロールバック (Rollback)

- **定義**: データベースの`トランザクション`処理において、処理の途中で障害が発生した場合に、処理開始前の一貫性のある状態にデータを戻す操作。
- **由来**: 「roll(巻く)」+「back(戻す)」から来ており、処理のログを巻き戻すイメージ。
- **目的**: データの整合性を維持すること。データベースの信頼性を保証する`ACID特性`のうち、**`原子性(Atomicity)`**を実現するための重要な仕組みです。
- **実行タイミング**: `トランザクション`が`コミット`(確定)される前に異常が発生した際に実行されます。`コミット`後のデータを取り消すことはできません。

### 2-2. バックアウト (Back-out) / 切り戻し

- **定義**: ソフトウェアの更新(バージョンアップ、パッチ適用)やシステム移行を実施した後、重大な不具合や業務影響のある問題が発覚した場合に、システム全体を旧バージョンや旧環境の状態に戻す運用上の操作。
- **用語の関係**:
  - `バックアウト`: `ITIL`(ITサービスマネジメントのベストプラクティス)における`リリース管理`の公式用語。「リリースを撤回する」という意味合いを持ちます。
  - `切り戻し`: `バックアウト`の日本語表現。「新環境から旧環境へ切り替え直す」という意味で、日本の開発・運用現場で広く使用されます。応用情報技術者試験でも`バックアウト`と同義語として扱われます。
- **由来**: 「back out(後退する、撤回する)」から来ています。
- **目的**: 業務継続性を確保すること。新システムでの問題を回避し、安定稼働していた旧環境へ迅速に復帰させるために行います。

### 2-3. 比較表：ロールバック vs バックアウト(切り戻し)

| 項目 | ロールバック (Rollback) | バックアウト (Back-out) / 切り戻し |
|------|------------------------|----------------------------------|
| 対象 | `トランザクション`(データ処理) | システム／ソフトウェアのリリース・移行 |
| 操作単位 | データベース内の個別の処理単位 | 運用環境全体または特定のモジュール単位 |
| 実行時期 | `コミット`前の異常発生時 | リリース・移行後の不具合発覚時 |
| 目的 | データ整合性の維持(`ACID特性`の`原子性`) | 業務継続性の確保 |
| 実施手段 | DBMSの`トランザクション`制御(ROLLBACK文など) | 旧版システムの再展開、バックアップからの復元、DNS切替など |
| 関連領域 | データベース管理、アプリケーション層(OSI第7層) | 運用管理、`リリース管理`、プロジェクト管理 |

---
## 3. システム移行・リリース管理における関連プロセスと用語
システム移行や大規模なリリースは、業務影響の大きい重要なプロセスです。安全性を確保するため、以下のような計画や活動が関連します。

### 3-1. システム移行・リリースの全体フロー
システム移行やリリースは、一般的に以下のステップで進行します。計画段階で様々なリスクを想定し、検証を経て本番に臨みます。

**【ステップ1: 計画立案】**
- `移行計画`: いつ、どのように新システムへ切り替えるかを定義します。
- `バックアウト計画`: 移行作業中または稼働後に問題が起きた場合に、どうやって旧環境に戻すかを定義します。

↓
**【ステップ2: 検証段階】**
- `移行リハーサル`: 計画した手順や所要時間が現実的か、事前に模擬実施して検証します。

↓
**【ステップ3: 本番切替】**
計画とリハーサルの結果に基づき、本番の移行作業を実施します。
↓

**【ステップ4: 結果判定】**
- 正常完了の場合 → **【ゴール: 新システム稼働】**
- 障害発生(失敗)の場合 → **【対応: `バックアウト`(`切り戻し`)の実施】**
  - `バックアウト計画`に従い、旧システムの状態へ戻します。

### 3-2. 関連用語の解説

**`移行計画` (Migration Plan)**
旧システムから新システムへ、データ・機能・業務を安全に移行するための一連の手順、スケジュール、体制、リスクなどを定義した計画。

**`移行リハーサル` (Migration Rehearsal)**
本番の移行作業と同一の手順を模擬的に実施し、手順の妥当性、所要時間、潜在的な問題点などを事前に検証する活動。「テスト(機能や性能の確認)」とは異なり、「移行作業そのものの手順検証」が主目的です。

**`バックアウト計画` (Back-out Plan)**
システム移行作業の**途中**で障害が発生した場合、または移行が**完了した後**に新システムで業務継続が困難な重大障害が発生した場合に備え、旧システムへ確実に戻すための手順、判断基準、体制などを定めた計画。

**`ロールフォワード` (Roll Forward)**
障害発生により`データベース`を`バックアップ`から復旧させた後、障害発生直前までの更新ログ(`ジャーナル`)を適用して、データを最新の状態に復元する操作。`ロールバック`とは対になるデータベース復旧技術です。

---

## 4.【重要】「バックアウト計画」の対象範囲
システム移行の文脈において、IPA公式見解では以下のように整理されています。
| 観点 | バックアウト計画 |
|------|-----------------|
| 想定される障害時期 | 移行作業の実行中**および**移行完了・本番稼働後 |
| 目的 | 移行作業の安全な中止**および**稼働システムの安全な旧環境復旧 |
| 戻す範囲 | 部分的(作業途中)または全面的(稼働後) |
| 主な対応 | 事前に定めた判断基準と手順に従い旧システムへ復帰 |
| 策定時期 | `移行計画`の立案段階で同時に作成 |

**要するに:**
- 「移行作業の途中で失敗した場合」→ `バックアウト計画`に従い対応
- 「移行は完了したが稼働後に問題が出た場合」→ `バックアウト計画`に従い対応

**【注意】実務における「ロールバック計画」という用語について**
実務の現場では、システム移行における「途中戻し手順」を「ロールバック計画」と呼ぶことがあります。しかし、**IPA公式文書や応用情報技術者試験では、この用語は標準化されていません**。IPAの過去問では、移行途中の中止手順も含めて「`バックアウト計画`」として扱われています。

試験対策としては、**システム移行に関する復旧計画は「バックアウト計画」に統一して理解する**ことが推奨されます。

---
## 5. 応用情報技術者試験(AP)におけるポイント

### 5-1. 試験の着眼点と頻出領域
- **最も狙われる誤解**: 「`ロールバック`」と「`バックアウト`／`切り戻し`」の混同。対象(データ vs システム)とタイミング(`コミット`前 vs リリース後)の違いを明確に理解することが重要です。
- **データベース領域**: 「`ロールバック`」は`コミット`前の操作であり、`ACID特性`の`原子性`と関連付けて問われます。「`コミット`後も戻せる」という選択肢は誤りです。
- **運用管理・プロジェクト管理領域**: 「`バックアウト`」「`切り戻し`」は`ITIL`の`リリース管理`におけるリリースの撤回操作として出題されます。「`移行リハーサル`」の目的(手順検証)や、「`バックアウト計画`」の必要性も頻出テーマです。

### 5-2. よくある誤解と正しい知識
| 誤解 | 正しい知識 |
|------|-----------|
| `ロールバック`と`バックアウト`は同じ意味。 | 対象が異なります。`ロールバック`はデータ処理単位、`バックアウト`はシステム単位の操作です。 |
| `コミット`済みのデータも`ロールバック`できる。 | できません。`コミット`(確定)されたデータへの変更は、新たな更新`トランザクション`として実行する必要があります。 |
| `移行リハーサル`はシステムテストの一種である。 | 目的が異なります。リハーサルは移行手順や所要時間の検証が目的であり、機能や性能を検証するテストとは区別されます。 |
| システム移行作業の途中で失敗した場合は、データベースの`ロールバック`で対応する。 | データベース処理の`ロールバック`とは別の概念です。システム移行の途中中止は`バックアウト計画`に従って対応します。 |

### 5-3. 代表例(正答例・誤答例)
| 区分 | 例 | 解説 |
|------|-----|------|
| ✅ 正答例 | データ更新中に障害が発生したため、処理を`ロールバック`して一貫性を保った。 | `コミット`前の`トランザクション`を取り消し、データの`原子性`を確保しています。 |
| ✅ 正答例 | 新バージョン導入後に不具合が発覚し、旧バージョンへ`バックアウト`した。 | システム運用のリリース撤回操作として正しい使い方です。 |
| ✅ 正答例 | 本番移行前に`移行リハーサル`を実施し、切替手順と所要時間を確認した。 | 移行作業そのものの検証という目的を正しく表現しています。 |
| ✅ 正答例 | 新システム稼働後に致命的な不具合が発生したため、`バックアウト計画`に従って旧システムに戻した。 | 移行完了後の障害対応として、事前の計画に基づき行動しています。 |
| ✅ 正答例 | システム移行作業中にネットワーク障害が発生したため、`バックアウト計画`に基づき作業を中止し、旧システムを再稼働させた。 | 移行途中の障害対応として、`バックアウト計画`を正しく適用しています。 |
| ❌ 誤答例 | `コミット`済みのデータを`ロールバック`して修正した。 | `コミット`後は`ロールバック`不可。修正は新たな更新処理で行う必要があります。 |
| ❌ 誤答例 | `バックアウト`は`データベース`の処理を取り消す操作である。 | `データベース`処理の取り消しは`ロールバック`です。`バックアウト`はシステム単位の操作です。 |
| ❌ 誤答例 | システム移行後に障害が発生したため、データベースの`ロールバック`機能で旧環境に戻した。 | システム単位の復旧は`バックアウト`です。`ロールバック`は`トランザクション`単位の操作です。 |

### 5-4. 一問一答
**問題1**: `データベース`更新処理の途中で障害が発生し、更新前の状態に戻す操作を何というか。

**回答**: `ロールバック`

---
**問題2**: システムリリース後に重大な不具合が発覚したため、旧版システムへ戻す対応を何というか。

**回答**: `バックアウト`(または `切り戻し`)

---
**問題3**: 新システムへの切替作業の手順や所要時間を本番前に確認するために模擬的に行う活動を何というか。

**回答**: `移行リハーサル`

---
**問題4**: 新システムへ移行完了後に業務が継続できない場合の対処を定めた計画はどれか。

**回答**: `バックアウト計画`

---
**問題5**: システム移行作業中に障害が発生した場合の対処を定めた計画はどれか。

**回答**: `バックアウト計画`

---
## 6. まとめ

- **`ロールバック`**は、データ処理単位での「巻き戻し」であり、データの整合性を保つための技術です。
- **`バックアウト`(`切り戻し`)**は、システム単位での「撤回・復旧」であり、業務継続性を確保するための運用操作です。
- **`バックアウト計画`**は、システム移行作業の途中で障害が発生した場合**および**移行完了後に障害が発生した場合の両方に備える計画です。
- **`移行リハーサル`**は、移行の成功確率を高めるために、手順や時間、リスクを事前に検証する重要な活動です。
- これらの用語の違いを「**対象範囲**」と「**実行タイミング**」で区別することが、正確な理解への鍵となります。
- 応用情報技術者試験では、システム移行における復旧手順は「`バックアウト計画`」として統一的に扱われることに注意してください。