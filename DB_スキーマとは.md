
## 応用情報技術者試験（令和6年・2024年春期）の午後問題「問6：データベース」
---

### 表2 スキーマを整理した結果

| スキーマ種類 | スキーマ名 | 配置する表 | 配置するビュー |
| :--- | :--- | :--- | :--- |
| 共有用 | PUB | 会社, 国民の祝日 | － |
| 個別会社用 | Cxxx<br>(xxx は任意の英数字) | 会社記念日, 従業員, 部署, 目標,<br>実績, 評価, 退職 | 会社,国民の祝日 |

次に, ビューを作成するSQL文について考える。
スキーマ`C001`に国民の祝日ビューを作成するSQL文を図4に示す。

**図4 国民の祝日ビューを作成するSQL文**
```sql
CREATE VIEW      e      (祝日, 祝日名)
AS SELECT 祝日, 祝日名
FROM      f
```
### 1. 「スキーマ」とは何か？ (ここが一番大事です)

データベースにおける**スキーマ**とは、テーブルなどのデータベースオブジェクトを格納しておくための**「フォルダ」や「名前空間」のようなもの**だと考えてください。

なぜフォルダ分けが必要かというと、

*   **名前の衝突を防ぐ**: 複数の会社が同じシステムを使うとき、「従業員」テーブルが会社ごとに必要になります。スキーマで会社ごとにフォルダ分け（例: C001、C002）すれば、同じ「従業員」という名前のテーブルをそれぞれが持てます。
*   **アクセス管理をしやすくする**: 「このフォルダ（スキーマ）はA社の担当者しか見られないようにしよう」といった権限設定が簡単になります。

#### 今回の問題に当てはめると

表2は、この「フォルダ分け（スキーマ）」のルールを示しています。

*   **共用スキーマ `PUB`**:
    *   どの会社からも共通で参照されるデータが入るフォルダです。
    *   ここには「会社」テーブルと「国民の祝日」テーブルが置かれています。
*   **個別会社用スキーマ `Cxxx`** (例: `C001`):
    *   会社ごとに個別のデータが入るフォルダです。
    *   ここには「従業員」や「部署」など、その会社固有のテーブルが置かれます。
    *   また、各社が使いやすいように、`PUB`にある共用データを参照するための「ビュー」もこのフォルダに作られます。

---

### 2. 空欄 `e` の解説

`CREATE VIEW` は、ビュー（仮想的なテーブル）を作成する命令です。
空欄 `e` は**「どこに、何という名前のビューを作るか」**を指定する部分です。

*   **問題文の指示**: 「スキーマ`C001`に国民の祝日ビューを作成する」とあります。
*   **構文**: ビューを作成する際は、通常 `スキーマ名.ビュー名` のように記述します。
*   **表2のルール**: 「個別会社用」スキーマ(`Cxxx`)に配置するビューとして「国民の祝日」が挙げられています。

これらの情報から、
「`C001` というスキーマ（フォルダ）の中に、『国民の祝日』という名前のビューを作る」
という意味になるため、`e` には以下が入ります。

**`e` の答え: `C001.国民の祝日`**

---

### 3. 空欄 `f` の解説

`FROM`句は、ビューが**「どのテーブルからデータを取ってくるか」**という参照元を指定する部分です。

*   **ビューの目的**: このビューは「国民の祝日」のデータを表示するためのものです。
*   **参照元のテーブル**: ということは、元になるデータは「国民の祝日」テーブルです。
*   **「国民の祝日」テーブルの場所**: ここでスキーマの知識が役立ちます。表2を見ると、「国民の祝日」テーブルは**共用スキーマ `PUB`** の中にあります。

現在、ビューを作ろうとしている場所は `C001` スキーマ（個別フォルダ）の中ですが、参照したいデータは `PUB` スキーマ（共用フォルダ）にあります。
このように、別のスキーマにあるテーブルを参照する場合は、`スキーマ名.テーブル名` と明記する必要があります。

したがって、`f` には以下が入ります。

**`f` の答え: `PUB.国民の祝日`**

---

### まとめ

完成したSQL文は以下のようになります。

```sql
CREATE VIEW C001.国民の祝日 (祝日, 祝日名)
AS SELECT 祝日, 祝日名
FROM PUB.国民の祝日
```

このSQL文は、**「共用フォルダ(PUB)にある『国民の祝日』テーブルを元にして、C001社専用のフォルダ(C001)に『国民の祝日』という名前のビュー（ショートカットのようなもの）を作成しなさい」**という意味になります。

このように、スキーマを「フォルダ」と捉え、**「どこに作るか(e)」**と**「どこから持ってくるか(f)」**を区別して考えることが、この問題を解くためのアプローチです。