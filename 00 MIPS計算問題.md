# CPU性能とMIPSの計算（整理版）

これは覚えること。
`Hz` =  `クロック／秒 = Ｃ／Ｓ`
【注意点】
（１）単位
・時間（時間、分、秒）
・バイト、ビット
（２）転送率
・５０％など
（３）圧縮率
・５０％等
（４）端数処理
・切り捨て、四捨五入




## 問題

以下の表に示す命令ミックスを持つコンピュータがあります。このコンピュータの処理性能は何MIPS（Mega Instructions Per Second）ですか。次元解析を用いて解答してください。

| 命令種別     | 実行速度（ナノ秒） | 出現頻度（%） |
| :----------- | :------------------- | :-------------- |
| 整数演算命令 | 10                   | 50              |
| 移動命令     | 40                   | 30              |
| 分岐命令     | 40                   | 20              |

---

## 解答

このコンピュータの処理性能は **40 MIPS** です。

---

# コンピュータの処理性能算出（単位変換アプローチ）

## 問題の要点

この問題は、以下の2ステップで解くことができます。

1.  命令ミックスから、コンピュータの平均的な性能である**「1命令あたりにかかる時間」**を算出する。
2.  算出された `[ナノ秒/命令]` という単位を、目標である `MIPS` すなわち `[百万命令/秒]` という単位に変換する。

---
### ステップ1: 「1命令あたりにかかる時間」の算出

まず、命令の実行時間と出現頻度から、1命令あたりの平均実行時間を計算します。

-   **整数演算命令**: `10 [ナノ秒] × 0.50 = 5.0 [ナノ秒]`
-   **移動命令**: `40 [ナノ秒] × 0.30 = 12.0 [ナノ秒]`
-   **分岐命令**: `40 [ナノ秒] × 0.20 = 8.0 [ナノ秒]`
**平均命令実行時間**:
`5.0 + 12.0 + 8.0 = 25 [ナノ秒]`

この結果、このコンピュータの性能は **`25 [ナノ秒/命令]`** であることがわかります。

---
### ステップ2: 単位変換 `[ナノ秒/命令] → [MIPS]`

ここからが本題です。「1命令あたり25ナノ秒かかる」という性能を、MIPS「1秒あたり何百万命令を実行できるか」に変換します。

#### 1. 単位の逆数をとる（視点の転換）

まず、`[時間/命令]` という単位を `[命令/時間]` に変換します。これは、「1命令にかかる時間」から「単位時間あたりに実行できる命令数」へと視点を切り替える操作です。

-   **変換前**: `25 [ナノ秒 / 1命令]`
-   **逆数をとる**: `1命令 / 25ナノ秒` = `0.04 [命令/ナノ秒]`

これは「**1ナノ秒あたりに0.04個の命令を処理できる**」ことを意味します。

#### 2. 時間の単位を `[ナノ秒]` から `[秒]` へ変換

次に、時間の単位をMIPSの単位である「秒」に合わせます。
`1秒 = 1,000,000,000 (10⁹) ナノ秒` の関係を使います。

1ナノ秒あたり `0.04` 命令を実行できるので、1秒あたりではその `10⁹` 倍の命令を実行できます。

-   `0.04 [命令/ナノ秒] × 10⁹ [ナノ秒/秒]`
-   `= 0.04 × 10⁹ [命令/秒]`
-   `= 40 × 10⁶ [命令/秒]`

これで「**1秒あたりに4,000万 (`40 × 10⁶`) 命令を実行できる**」ことがわかりました。

#### 3. MIPS単位への最終変換
最後に、`MIPS` の定義に合わせて数値を整理します。
`MIPS` は「**百万 (`Mega` = `10⁶`)** 命令毎秒」を意味します。

-   `40 × 10⁶ [命令/秒]`
-   上記は、`40` × `(10⁶ 命令/秒)` と見ることができます。
-   `10⁶ 命令/秒` = `1 MIPS` なので、これを置き換えると...

**`40 MIPS`** となります。

---

## 結論
以上の単位変換プロセスにより、平均命令実行時間 `25 [ナノ秒/命令]` は **40 MIPS** に相当することがわかります。


## 問題
あるクライアントサーバシステムにおいて、クライアントから要求された1件の検索を処理するために、サーバで平均100万命令が実行される。  
1件の検索につき、ネットワーク内で転送されるデータは平均 2×10^5 バイトである。  
このサーバの性能は100MIPSであり、ネットワークの転送速度は 8×10^7 ビット／秒である。  
このシステムにおいて、1秒間に処理できる検索要求は何件か。  
ここで、処理できる件数は、サーバとネットワークの処理能力だけで決まるものとする。  
また、1バイトは8ビットとする。

---

## 解法（次元解析）

### サーバ側
(100 × 10^6) ÷ (1 × 10^6)  
= 100 件/秒   ※ボトルネックなので未使用。

### ネットワーク側
1件あたり転送量 = 2 × 10^5 × 8 = 1.6 × 10^6 ビット  
(8 × 10^7) ÷ (1.6 × 10^6)  
= 50 件/秒　　　　

※ネットワーク内で転送されるデータとネットワークの転送速度だけで算出して解答可能な問題。

### ボトルネック
サーバ：100 件/秒  
ネットワーク：50 件/秒  
→ 最大処理件数 = **50 件/秒**

---
### ボトルネック
サーバ：100 件/秒
ネットワーク：50 件/秒


## 問題

動作クロック周波数が700MHzのCPUで、命令の実行に必要なクロック数とその命令の出現率が次の表のとおりである。
このCPUの性能は約何MIPSか。

| 命令の種類            | 命令実行に必要なクロック数 | 出現率 (%) |
| レジスタ間演算        | 4                        | 30      |
| メモリ・レジスタ間演算 | 8                        | 60      |
| 分岐命令              | 10                       | 10      |

選択肢：10, 50, 70, 100

---

## 2. 解法の流れ

1. 各命令のクロック数 × 出現率を求めて合計し、平均`CPI（命令あたりクロック数＝I／C）`を求める。
2. CPUのクロック周波数を`Hz（クロック／秒＝Ｃ／Ｓ）`に直す。
3. 1秒間に実行できる命令数を求める。（`Ｉ／Ｓ`）
4. それを百万命令単位に換算し、MIPSを求める。

---

## 3. 計算過程

1. 平均CPIの計算
   (4 × 0.3) + (8 × 0.6) + (10 × 0.1)
   = 1.2 + 4.8 + 1.0
   = 7.0

   → 平均CPI = 7

2. CPUクロック周波数をHzに直す
   700 MHz = 700 × 10^6 Hz
   → 1秒間に 700 × 10^6 クロック発生

3. 1命令に7クロック必要なので、1秒間に実行できる命令数は
   (700 × 10^6) ÷ 7 = 100 × 10^6

4. MIPS値
   (100 × 10^6) ÷ 10^6 = 100

---

## 4. 答え

**100 MIPS**

---

## 5. 試験で狙われやすいポイント

* 出現率を掛け忘れて単純平均してしまうミス。
* MHzをそのまま使い「700 ÷ 7 = 100」で止めてしまい、単位を誤解するミス。
* 最後に「10^6 で割って MIPSに直す」工程を忘れるミス。

---

## 6. 補足（Hzの意味）

* Hz = 1秒間に繰り返す回数
* CPUクロック周波数 = 1秒間に発生するクロック数
* 700 M`Hz` = 700 × 10^6 `クロック／秒 = Ｃ／Ｓ`

---


