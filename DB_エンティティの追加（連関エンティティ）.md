
# 連関エンティティのAP試験での出題傾向

**エンティティの追加＝連関エンティティの追加** というパターンは頻出です。

特に「多対多関係を1対多＋1対多に直せ」という設問でよく使われます。

過去問でも「履修」「発注明細」「販売」など、関係を表すエンティティ名が正答になってきました。

👉 AP　H21　秋　午後のデータベース設問３のように **「ER図に追加せよ」**と書かれたら、新しい業務の対象エンティティではなく、中間に入る**連関エンティティ**を考えるのが鉄則です。



---

# １　なぜ「中間テーブル（連関エンティティ）」が必要か

* **リレーショナルデータベースは「多対多」を直接表せない**
  → 「1対多」と「1対多」の組み合わせに分解する必要があります。

例）顧客と申込みが「多対多」だったら：

```
顧客  多 ←→ 多 申込み
```

これはRDBにそのまま作れないので、真ん中に「連関エンティティ」を入れて：

```
顧客 1 → 多 参加 多 ← 1 申込み
```

という形に直します。

---

# ２　なぜ「動詞っぽい名前」になるのか

* エンティティには2種類あります。
  ① **モノ（名詞的）**：顧客、商品、部署、社員
  ② **コト（関係的な出来事＝動詞的）**：注文する、参加する、履修する

* 「モノとモノを結びつけるための出来事」を表すのが **連関エンティティ** です。
  そのため名前も「参加」「注文明細」「履修」など動詞・行為に基づくことが多いのです。

---

# ３　具体例で比較

### 顧客と申込み（多対多）

* ある顧客が複数の申込みをする
* 1つの申込みに複数顧客が関わる（家族旅行など）
  👉 ここで「参加」という出来事を表すエンティティが必要。

```
顧客 1→多 参加 多←1 申込み
```

---

### 商品と注文（多対多）

* 1つの注文には複数の商品が含まれる
* 1つの商品は複数の注文に登場する
  👉 ここで「注文明細」という中間テーブルが必要。

```
注文 1→多 注文明細 多←1 商品
```

---

### 学生と講義（多対多）

* 学生は複数の講義を履修する
* 1つの講義には複数の学生が履修する
  👉 ここで「履修」という連関エンティティが必要。

```
学生 1→多 履修 多←1 講義
```

---

# ４　AP試験での「気づき方」

* 問題文に「顧客と申込みは多対多関係」とある → **必ず中間を入れる必要がある**
* ER図で「新しいエンティティを追加せよ」と問われる → **中間（連関）エンティティの追加が正答パターン**
* 名前は「出来事や関係を表す動詞っぽい言葉」になるのが鉄則

  * 注文明細
  * 参加
  * 履修
  * 受注／発注
  * 支払／受領

👉 この「動詞っぽい言葉」が見えたら「あ、連関エンティティを作る問題だ！」と気付けるようになります。

---

# ✅まとめ（3行）

* 「多対多」はそのままでは表現できず、中間に連関エンティティを入れる。
* 連関エンティティは「出来事・関係」を表すので、名前が動詞的になる。
* AP試験では「エンティティ追加せよ」＝「連関エンティティ追加」が典型的出題パターン。

---

### 連関エンティティ練習問題

**設問**
**Q1**
「社員」と「プロジェクト」は多対多の関係です。
社員は複数のプロジェクトに参加でき、プロジェクトには複数の社員が関わります。
このとき必要な連関エンティティの名称は？

**回答**
従事（あるいは「担当」、「参加」）

---

**設問**
**Q2**
「患者」と「薬」は多対多の関係です。
患者は複数の薬を処方され、薬は複数の患者に処方されます。
このとき必要な連関エンティティの名称は？

**回答**
処方（あるいは「処方箋」）

---

**設問**
**Q3**
「講師」と「研修コース」は多対多の関係です。
講師は複数のコースを担当でき、コースは複数の講師が担当します。
このとき必要な連関エンティティの名称は？

**回答**
担当（あるいは「指導」）

---

**設問**
**Q4**
「顧客」と「商品」は多対多の関係です。
顧客は複数の商品を購入でき、商品は複数の顧客に購入されます。
このとき必要な連関エンティティの名称は？

**回答**
購入（あるいは「注文」、「販売」）

---

**設問**
**Q5**
「学生」と「サークル」は多対多の関係です。
学生は複数のサークルに所属でき、サークルには複数の学生が所属します。
このとき必要な連関エンティティの名称は？

**回答**
所属