ACID特性に関する問題集（応用情報技術者試験準拠）

本資料は、ACID特性（Atomicity, Consistency, Isolation, Durability）に関する理解を深めることを目的とした問題集です。問題、選択肢、正答、解説の順に体系的に整理されています。


問題 1
トランザクションの原子性に関する記述として適切なものはどれか。

ア．トランザクションが途中で中断された場合でも、その処理結果の一部は反映されることがある。
イ．トランザクションは、処理内容を分割して部分的にコミットできる。
ウ．トランザクション内のすべての処理が成功するか、すべて失敗して元の状態に戻る。
エ．トランザクションは、他のトランザクションと並行して実行されるため、途中結果が反映されることがある。

✅ 正答：ウ

解説：原子性（Atomicity）は、「すべて実行される」か「まったく実行されない」のいずれかという性質を指します。部分的な実行や中途半端な状態の反映は許されません。


問題 2
整合性に関する説明として最も適切なものはどれか。

ア．トランザクションが完了すると、すべてのデータは初期状態に戻る。
イ．トランザクション実行中に不整合が発生しても、最後にコミットすれば整合性が保証される。
ウ．トランザクションが開始前後で、データベースが定義された制約を常に満たすようにする。
エ．整合性はデータベース全体の可用性を指し、トランザクションとは無関係である。

✅ 正答：ウ

解説：整合性（Consistency）は、トランザクションが実行される前後で、データベースが定義された制約条件（例えば、主キーの一意性、外部キーによる参照整合性、NULLを許容しないカラムへの値の挿入、あるいはビジネスロジックで定められた特定のルールなど）を常に満たしている状態を保証する性質です。これにより、データが矛盾なく、ビジネス上のルールに沿った状態に保たれます。トランザクションが成功すれば、データベースは新しい整合性の取れた状態に遷移し、失敗した場合は元の整合性の取れた状態に戻ります。




ACID特性の定義と着眼点

これはデータベースの **ACID特性**（Atomicity・Consistency・Isolation・Durability）についての説明ですね。応用情報でも頻出なので、整理して体系的にまとめ直します。

---

## １　全体像（テキスト図）

```
トランザクション特性（ACID）　　　　　　　　　　　　　　　　　　ＫＷ
 ├─ A: Atomicity（原子性）   …… 全部成功 or 全部失敗　　　　　：ALL or Nothing
 ├─ C: Consistency（一貫性） …… 制約を常に満たす　　　　　　　：ルール、整合
 ├─ I: Isolation（独立性）   …… 他トランザクションに干渉しない：他の処理との関係
 └─ D: Durability（耐久性）  …… 障害が起きても結果は永続　　　：障害
```
---
## １－１　定義（IPA準拠）と用語の由来

* **Atomicity（原子性）**
  *語源*: atomic（割れない、最小単位）＋性。
  トランザクションは「不可分の最小単位」であり、中途半端に終わらない。

* **Consistency（一貫性）**
  *語源*: consistent（一致している、矛盾がない）。
  データベースの整合性制約を常に満たす。

* **Isolation（独立性）**
  *語源*: isolate（孤立させる）。
  他の処理と「同時に実行しても、干渉しない」ようにする。

* **Durability（耐久性）**
  *語源*: durable（壊れにくい、持続する）。
  障害があっても、結果が残り続ける。

*  バックアップとの違い
* 耐久性（Durability）
→ 瞬間的な「コミット済みトランザクションの永続保証（コミット済みの処理は、障害があってもログを使って必ず復元されるという保証）
→ 実現手段：ログ書き込み＋リカバリ機能
* バックアップ
→ 長期的な「データの保存」や「災害復旧」のための仕組み
→ 実現手段：フルバックアップ、差分バックアップなど。サーバが丸ごと壊れた場合でも、数日前時点のデータを復旧できる。
---

## １－２　技術の必要性（解決する具体的課題）

* 原子性A → **一部だけ実行される中途半端状態**を防ぐ
* 一貫性C → **ルール違反（整合性違反）データ**を防ぐ
* 独立性I → **同時処理による矛盾や競合**を防ぐ
* 耐久性D → **障害発生によるデータ消失**を防ぐ

---

## １－３　試験の着眼点

* 試験作成者が狙う誤解ポイント
  ① 原子性Aと一貫性Cを混同（「全部やるか全部やらない」は原子性Aであり、整合性ルール保持は一貫性C）。
  ② 独立性Iと排他制御を混同（独立性Iは概念、ロックやスケジューリングは手段）。
  ③ 耐久性Dとバックアップを混同（耐久性Dは**コミット後の永続保証**、バックアップとは別物）。

---

## １－４　体系マップ（分類・関係・比較表）

| 特性    | 内容             | 主な制御技術                          |
| ----- | -------------- | ------------------------------- |
| A 原子性 | All or Nothing | ロールバック、ジャーナル管理                  |
| C 一貫性 | 制約を常に満たす       | 制約検査（PK, FK, NOT NULL, CHECK）   |
| I 独立性 | 並行実行でも矛盾なし     | ロック制御、直列化可能スケジューリング             |
| D 耐久性 | コミット結果は永続      | WAL（Write Ahead Logging）、障害回復処理 |

---

## １－５　代表例（正答例・誤答例）

* **正答例**：「トランザクションが中途で止まらず、すべて実行されるか全く実行されない性質」＝原子性
* **誤答例**：「トランザクションが常に制約を守る性質」＝一貫性を原子性と混同
---

## １－６　よくある誤解と正しい知識

* 誤解１：「原子性A＝データが矛盾しないこと」
  → 正しくは「中途半端に終わらないこと」。矛盾しないのは一貫性。

* 誤解２：「独立性I＝排他制御そのもの」
  → 正しくは「概念としての独立性I」であり、ロックなどは実現手段。

* 誤解３：「耐久性＝バックアップ」
  → 正しくは「コミットした結果が失われないこと」。バックアップは長期保全。

---

## １－７　一問一答（5問）

**Q1.** トランザクションの「全部実行されるか全く実行されないか」の性質は？
**A1.** 原子性A。
**解説:** All or Nothingの原則。

**Q2.** 主キー一意性や残高が負にならないといった制約を守る性質は？
**A2.** 一貫性C。
**解説:** データ整合性ルールを保証。

**Q3.** 複数トランザクション同時実行でも干渉しない性質は？
**A3.** 独立性I。
**解説:** あたかも逐次実行のように見える（直列化可能性）。

**Q4.** 障害発生後もコミット済みのデータが残る性質は？
**A4.** 耐久性D。
**解説:** ジャーナルやWALで保証。

**Q5.** 「口座Aから引き落とし済みだが、口座Bに入金されていない」という状態を防ぐのは？
**A5.** 原子性A。
**解説:** 一部だけ成功しないようロールバック。

---

## １－８　要約（3行以内）

ACID特性は、トランザクションが信頼できる処理単位であることを保証する４要素（原子性A・一貫性C・独立性・耐久性I）。
試験では特性の混同を狙われやすく、区別が重要。
理解の鍵は「A＝途中中断なし、C＝制約保持、I＝並行でも矛盾なし、D＝障害でも結果保持」。

---



