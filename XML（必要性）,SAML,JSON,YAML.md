
# データ記述・交換フォーマットの体系整理（XML → SAML → JSON → YAML）

---

## １　全体像（テキスト図）

```
XML（1998, W3C）
 ├─ SOAP（メッセージ交換の標準プロトコル）
 ├─ SAML（2001, 認証情報交換に特化, XML利用）
 ├─ JSON（2001頃, 軽量データ交換, Web向け）
        └→ YAML（2001頃, 設定ファイル向け, 人間可読性重視）
```
XML → SAML（結構うざい） → JSON → YAMLの順に可読性はよくなる。
---

## １－１　定義（IPA準拠）と用語の由来

* **XML (eXtensible Markup Language)**
  データをタグで構造化して表現する汎用マークアップ言語。1998年W3C標準化。
  「extensible＝拡張可能」「markup＝タグ付け」。

* **SOAP（Simple Object Access Protocol）**
 XMLを利用したメッセージ交換プロトコル。
「オブジェクト呼び出し」をインターネット越しに実現するために考案。

* **SAML (Security Assertion Markup Language)**
  XMLを基盤とし、認証・属性情報をシステム間でやり取りする仕様。2001年OASIS標準化。
  「assertion＝主張」。認証結果を他に伝達する。

* **JSON (JavaScript Object Notation)**
  JavaScriptのオブジェクト表記をもとにした軽量データ記述形式。2001頃提案、2006にRFC。
  「notation＝表記法」。

* **YAML (YAML Ain’t Markup Language)**
  JSONを参考に、人間が読みやすいデータ記述形式。2001頃登場。
  当初は「Yet Another Markup Language」→のちに再定義。

---

## １－２　技術の必要性（解決する具体的課題）

* **XML**：
異なるシステム間でデータ交換を標準化したい（HTMLは表現寄りで不十分）。
* **SAML**：
企業間やクラウド間で「ログイン情報を安全に共有」する必要（シングルサインオン）。
* **JSON**：
XMLは冗長で処理が重い。Webアプリで高速・軽量にデータ交換したい。
* **YAML**：
JSONは機械寄りで人間が読みづらい。設定ファイルを手書き編集しやすくしたい。

---

## １－３　試験の着眼点（頻出領域／ひっかけ）

* XML：タグ構造とデータ検証（DTD/XSD）。
* SAML：シングルサインオン、認証連携。
* JSON：XMLとの比較（軽量性・処理効率）。
* YAML：設定ファイル、インデント構造。

---

## １－４　体系マップ（分類・関係・比較表）

| 技術   | 主体    | 主目的     | 強み         | 弱み         | 主な用途          |
| ---- | ----- | ------- | ---------- | ---------- | ------------- |
| XML  | W3C   | 汎用データ記述 | 自由度、検証可能   | 冗長、重い      | SOAP、文書交換     |
| SAML | OASIS | 認証情報交換  | 信頼連携、SSO   | XML依存、実装複雑 | SSO、フェデレーション  |
| JSON | IETF  | 軽量データ交換 | シンプル、高速    | コメント不可     | Web API、AJAX  |
| YAML | OSS   | 人間可読な設定 | 可読性、JSON互換 | インデント厳格    | 設定ファイル、DevOps |

---

## １－５　代表例（コード例）

### XML例（社員データ）

```xml
<社員>
  <社員ID>1001</社員ID>
  <社員名>山田太郎</社員名>
  <部署>営業</部署>
</社員>
```

### SAML例（認証アサーションの一部）

```xml
<saml:Assertion>
  <saml:Subject>
    <saml:NameID>yamada@example.com</saml:NameID>
  </saml:Subject>
  <saml:AttributeStatement>
    <saml:Attribute Name="部署" Value="営業"/>
  </saml:AttributeStatement>
</saml:Assertion>
```

### JSON例（社員データ）

```json
{
  "社員ID": 1001,
  "社員名": "山田太郎",
  "部署": "営業"
}
```

### YAML例（社員データ）

```yaml
社員ID: 1001
社員名: 山田太郎
部署: 営業
```

---

## １－６　よくある誤解と対処

* 「SAMLはXMLの一種」→誤り。SAMLは**XMLを利用した認証プロトコル**。
* 「JSONとYAMLは同じ」→誤り。YAMLはJSONを包含し、人間が編集しやすい。
* 「XMLはもう不要」→誤り。金融・公共系の基盤システムやSOAP Webサービスでは今も利用。

---

## １－７　一問一答（4問）

**問題１**：SAMLの主な利用目的は何か。
**回答**：認証情報の安全な共有（SSOなど）。
**解説**：特に企業間連携やクラウド利用で必須。

**問題２**：JSONがXMLより優れている点は何か。
**回答**：軽量で高速に処理できる。
**解説**：タグ構造がないためデータ量が少ない。

**問題３**：YAMLがJSONと異なる点は何か。
**回答**：人間可読性に重点。インデントで階層を表現。
**解説**：設定ファイル編集に適している。

**問題４**：XMLが依然利用される理由は何か。
**回答**：厳格なデータ検証や標準化が必要な分野で信頼性が高い。
**解説**：金融・公共システムなどでは依然必須。

---

## １－８　要約（3行以内）

XMLは汎用データ交換基盤、SAMLは認証連携、JSONは軽量データ交換、YAMLは設定編集に特化して存在している。
一つに統一できないのは「利用目的と対象」が異なるためである。

---

## １－９　次アクション（復習間隔と演習提案）

* 復習：3日以内に「社員データ」をXML/JSON/YAMLで自力記述。
* 演習：SAMLのSSO利用例を過去問で確認。

---

👉 ご質問：「一つに統一すればいいのでは？」に対しての結論は、
**データ交換（XML/JSON）と認証連携（SAML）と設定編集（YAML）という用途が異なるため、棲み分けが成立している**です。

良い問題意識です。多くの人が「XMLは冗長だし、もうJSONやYAMLで十分では？」と考えます。ここで **XMLの必要性** と **SOAPとの関係**、さらに **「厳格さ」の意味の違い** を整理します。

---





# XMLの必要性とSOAP・SAMLとの関係

---

## １　全体像（テキスト図）

```
XML
 ├─ SOAP（メッセージ交換の標準プロトコル）
 └─ SAML（認証情報交換の標準仕様, XML利用）

JSON / YAML → 軽量データ記述（可読性・速度重視）
```

---

## １－１　定義と用語の由来

* **XML（eXtensible Markup Language）**
  データをタグで構造化する汎用マークアップ言語（W3C 1998標準化）。

* **SOAP（Simple Object Access Protocol）**
  XMLを利用したメッセージ交換プロトコル。
  「オブジェクト呼び出し」をインターネット越しに実現するために考案。

* **SAML（Security Assertion Markup Language）**
  認証情報（誰が誰か）を安全に伝えるプロトコル（OASIS標準 2001）。XMLを利用。

---

## １－２　XMLが必要とされた理由

（１）**異なるシステム・プラットフォーム間での共通表現**

* HTMLは「見た目の表現」しか扱えない。
* CSVは「表形式」しか扱えない。
* XMLは「入れ子構造で自由にタグを定義」でき、複雑な業務データ（例：注文書、財務報告書）を表現できる。

（２）**厳格な検証と信頼性**

* XMLは **DTD（文書型定義）やXSD（XML Schema Definition）** により、「必須項目」「型（文字列／数値）」「階層構造」まで厳格にチェック可能。
* → データ交換で「不正確なデータを拒否」できる。

（３）**業務分野の要求**

* 金融、公共、国際標準（例：XBRLによる財務報告）では「形式と検証可能性」が必須。
* JSONやYAMLは軽量だが、こうした厳格な検証の枠組みを標準化していない。

---

## １－３　SOAPとは何か

* **SOAP = XMLをベースにしたメッセージ交換プロトコル**。
* リクエストとレスポンスを「必ずXML形式」で記述。
* 特徴：
  * HTTPだけでなくSMTPなどでも利用可能。
  * メッセージの「構造・型・エラー処理」が仕様で厳格に定義されている。
  * WSDL（Web Services Description Language, これもXML）と組み合わせて、サービスのインタフェースを正確に記述可能。

👉 つまり **SOAPは「通信のやりとり」そのものの厳格化** を目的とした規格。

---

## １－４　SAMLの「厳格さ」との比較

| 領域       | 厳格性の意味                              | 代表例                        |
| -------- | ----------------------------------- | -------------------------- |
| **XML**  | データ構造の検証が可能（DTD/XSD）。フォーマットの正当性を保証。 | 「社員IDは必須項目」「給与は整数値」などを強制可能 |
| **SOAP** | 通信プロトコルとしての厳格性。送信・受信の枠組みが標準化。       | 「メッセージには必ずEnvelope要素を持つ」   |
| **SAML** | 認証情報の厳格性。誰が誰かを証明する。                 | 「ユーザID＝山田太郎、属性＝営業部」        |

👉 つまり、
**XMLの厳格さ = データ形式の正しさ**
**SAMLの厳格さ = 認証の正しさ**
という、守備範囲の違い。

---

## １－５　具体例

### XML + SOAPの例（社員情報を問い合わせるリクエスト）

```xml
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <GetEmployeeRequest>
      <社員ID>1001</社員ID>
    </GetEmployeeRequest>
  </soap:Body>
</soap:Envelope>
```

### SAMLの例（認証情報を伝達）

```xml
<saml:Assertion>
  <saml:Subject>
    <saml:NameID>yamada@example.com</saml:NameID>
  </saml:Subject>
  <saml:AttributeStatement>
    <saml:Attribute Name="部署" Value="営業"/>
  </saml:AttributeStatement>
</saml:Assertion>
```

👉 **違い**

* SOAP：システム間で「処理依頼・応答」のやりとり。
* SAML：システム間で「認証情報」のやりとり。
* 共通点：どちらもXMLで表現。

---

## １－６　一問一答

**問題１**：XMLが「厳格」と言われるのはなぜか。
**回答**：DTDやXSDでデータの構造や型を検証できるから。
**誤答例**：「認証が強いから」→これはSAMLの特徴。

**問題２**：SOAPは何を解決するか。
**回答**：システム間での標準化されたメッセージ交換。
**解説**：プロトコルに依存しない形でサービス呼び出しを可能にする。

**問題３**：SAMLの厳格さは何に対するものか。
**回答**：認証・属性情報の正当性。
**解説**：XMLの厳格さ（データ構造検証）とは守備範囲が異なる。

---

いい質問です。「厳格さを決めているのは誰か」という点を明確にします。

---

## １　厳格さを決める主体

| 技術       | 厳格さを規定する主体                     | 厳格さの対象                          |
| -------- | ------------------------------ | ------------------------------- |
| **XML**  | W3C（World Wide Web Consortium） | データ形式・構文（DTD/XSDで検証可能）          |
| **SOAP** | W3C（2003年に標準化）                 | 通信プロトコルの構造（Envelope/Bodyなど必須要素） |
| **SAML** | OASIS（構造化情報標準促進団体）             | 認証アサーション（ユーザIDや属性情報の真正性）        |

---

## ２　「厳格さ」とは何を意味するか

* **XMLの厳格さ**
  → **文書構造やデータ型**を機械的に検証できる仕組みを持つ。
  （例：「社員IDは整数で必須」→DTD/XSDで強制）

* **SOAPの厳格さ**
  → **通信メッセージの形式**がプロトコル仕様で固定される。
  （例：「必ずEnvelope→Header→Bodyの構造」）

* **SAMLの厳格さ**
  → **認証トークンの真正性**をセキュリティ仕様で担保**。
  （例：「署名付きAssertionを検証して本人確認」）

---

## ３　まとめ（守備範囲）

👉 厳格さを決めるのは「標準化団体（W3CやOASIS）」であり、
👉 厳格さの対象は 
* データ形式（XML）
* 通信枠組み（SOAP）
* 認証（SAML）
とそれぞれ異なる。

---

## ４　一問一答（確認）

**問題**：SOAPの厳格さを保証しているのは何か？
**回答**：W3Cが標準化したプロトコル仕様。
**誤答例**：「XMLそのものが保証している」→誤り。XMLはデータ形式を保証するだけであり、通信枠組みはSOAP仕様。

---

質問に即答すると：
**厳格さを決めているのは、国際標準化団体（W3CやOASIS）が定義した仕様そのもの**です。

---





